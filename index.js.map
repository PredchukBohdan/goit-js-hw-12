{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport default async function axiosReguest(value, page, limit) {\n  const BASE_URL = 'https://pixabay.com/api/';\n  const API_KEY = '48820344-d1ffc058fda0b82549bb04a16';\n\n  try {\n    const response = await axios.get(BASE_URL, {\n      params: {\n        key: API_KEY,\n        q: value,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: page,\n        per_page: limit,\n      },\n    });\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching data:', error);\n    throw error;\n  }\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst galleryPopup = new SimpleLightbox('.images-gallery .gallery-link', {\n  captionsData: 'alt',\n  captionDelay: 250,\n  overlayOpacity: 0.8,\n  className: 'gallery-popup',\n});\n\nexport function renderErrorMessage() {\n  return iziToast.error({\n    message:\n      'Sorry, there are no images matching your search query. Please try again!',\n    position: 'topRight',\n    backgroundColor: '#EF4040',\n    messageColor: 'white',\n    iconColor: 'white',\n    iconUrl: '../img/group.svg',\n    progressBar: true,\n    timeout: 10000,\n    animateInside: false,\n    messageSize: '16',\n    transitionIn: 'fadeIn',\n    class: 'error',\n  });\n}\n\nexport function renderInfoMessage() {\n  return iziToast.info({\n    message: `We're sorry, but you've reached the end of search results.`,\n    position: 'topRight',\n    messageColor: '#000',\n    iconColor: '#000',\n    progressBar: true,\n    timeout: 10000,\n    animateInside: false,\n    messageSize: '16',\n    transitionIn: 'fadeIn',\n  });\n}\n\nexport function renderImages(images, gallery) {\n  const imagesHTMLArray = images.map(image => {\n    return `<li class=\"gallery-item\">\n                 <a href=\"${image.largeImageURL}\" class=\"gallery-link\">\n                    <img class=\"gallery-image\" src=\"${image.webformatURL}\" alt=\"${image.tags}\" width=\"500\"/>\n                 </a>\n                 <ul class=\"gallery-info\">\n                    <li class=\"gallery-likes\">\n                        <span class=\"title\">Likes</span>\n                        <span class=\"content\">${image.likes}</span>\n                    </li>\n                    <li class=\"gallery-views\">\n                        <span class=\"title\">Views</span>\n                        <span class=\"content\">${image.views}</span>\n                    </li>\n                    <li class=\"gallery-comments\">\n                        <span class=\"title\">Comments</span>\n                        <span class=\"content\">${image.comments}</span>\n                    </li>\n                    <li class=\"gallery-downloads\">\n                        <span class=\"title\">Downloads</span>\n                        <span class=\"content\">${image.downloads}</span>\n                    </li>\n                 </ul>\n              </li>`;\n  });\n  gallery.insertAdjacentHTML('beforeend', imagesHTMLArray.join(''));\n  galleryPopup.refresh();\n}\n\nexport function toggleLoader(loader) {\n  loader.classList.toggle('show');\n}\n","import axiosRequest from './js/pixabay-api';\nimport {\n  renderErrorMessage,\n  renderInfoMessage,\n  renderImages,\n  toggleLoader,\n} from './js/render-functions';\n\nwindow.addEventListener('DOMContentLoaded', () => {\n  const form = document.querySelector('.search-form');\n  const loadMoreButton = document.querySelector('.load');\n  const imagesGallery = document.querySelector('.images-gallery');\n  const loader = document.querySelector('.loader');\n  const limit = 40;\n  let page = 1;\n  let currentValue = '';\n  let totalPages = 1;\n\n  function initialGallery(e) {\n    e.preventDefault();\n    const searchInput = form.elements.search.value;\n    if (!searchInput) return;\n\n    currentValue = searchInput;\n    loadMoreButton.classList.remove('show');\n    toggleLoader(loader);\n    imagesGallery.innerHTML = '';\n    page = 1;\n    handleRequest(searchInput, page, limit);\n  }\n\n  async function handleRequest(value, page, limit) {\n    try {\n      const response = await axiosRequest(value.trim(), page, limit);\n      totalPages = Math.ceil(response.totalHits / limit);\n      const images = response.hits;\n      if (!images.length) {\n        imagesGallery.innerHTML = '';\n        renderErrorMessage();\n        loadMoreButton.classList.remove('show');\n      } else {\n        renderImages(images, imagesGallery);\n        loadMoreButton.classList.toggle('show', page < totalPages);\n      }\n    } catch (error) {\n      console.log(error);\n    } finally {\n      toggleLoader(loader);\n      form.reset();\n    }\n  }\n  async function loadMore() {\n    if (page >= totalPages) return;\n    toggleLoader(loader);\n    loadMoreButton.classList.remove('show');\n    page++;\n\n    try {\n      const response = await axiosRequest(currentValue.trim(), page, limit);\n      const images = response.hits;\n      renderImages(images, imagesGallery);\n      loadMoreButton.classList.add('show');\n      smoothScroll();\n\n      if (page >= totalPages) {\n        loadMoreButton.classList.remove('show');\n        renderInfoMessage();\n      }\n    } catch (error) {\n      console.log(error);\n    } finally {\n      toggleLoader(loader);\n      form.reset();\n    }\n  }\n  function smoothScroll() {\n    const firstImage = imagesGallery.querySelector('.gallery-item');\n    if (firstImage) {\n      const imageHeight = firstImage.getBoundingClientRect().height;\n      window.scrollBy({\n        top: imageHeight * 2,\n        behavior: 'smooth',\n      });\n    }\n  }\n\n  form.addEventListener('submit', initialGallery);\n  loadMoreButton.addEventListener('click', loadMore);\n});\n"],"names":["axiosReguest","value","page","limit","BASE_URL","API_KEY","axios","error","galleryPopup","SimpleLightbox","renderErrorMessage","iziToast","renderInfoMessage","renderImages","images","gallery","imagesHTMLArray","image","toggleLoader","loader","form","loadMoreButton","imagesGallery","currentValue","totalPages","initialGallery","e","searchInput","handleRequest","response","axiosRequest","loadMore","smoothScroll","firstImage","imageHeight"],"mappings":"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"}